---
title: 모듈로 코드 구조화하기
source: https://frontend-fundamentals.com/bundling/webpack-tutorial/module-system.html
---
### 웹팩으로 모듈 관리하기

하나의 파일에 모든 기능을 몰아넣으면 수정도 어렵고 협업도 불편해짐. 그래서 코드를 작은 단위(모듈)로 나눠 필요한 부분만 가져다 쓰는 **모듈 시스템**을 사용함.

요즘 브라우저는 `import`와 `export`같은 문법(`ESM`)을 지원해서 번들링 없이 모듈을 직접 쓸 수도 있음. 하지만 실무에선 성능과 호환성 문제 때문에 그대로 쓰긴 어려운 경우가 많음.

웹팩으로 모듈을 번들링하면 ESM을 그대로 사용하느 것에 비해 다음과 같은 장점이 있음.

- 파일을 하나로 합침: 네트워크 요청을 줄여 더 빠르게 로딩됌.
- 필요한 코드만 남김: 쓰지 않는 코드는 자동으로 제거함.
- 다양한 파일을 다룸: JS뿐 아니라 CSS, 이미지도 함께 관리할 수 있음.

---
### 기존 코드의 문제점

지금 프로젝트엔 몇 가지 구조적 문제가 있음.

1. 전역 변수 사용: `emoji.js`의 변수가 전역에 노출되어 있어서, 다른 코드와 충돌할 수 있음.
2. 불명확한 의존성: `main.js`는 `emoji.js`에 의존하고 있지만 코드에 그 관계가 명시적으로 드러나지 않음.
3. CDN 의존성: `date-fns`를 CDN으로 불러오고 있어서 오프라인 환경에서 개발이 어렵고 버전 관리도 힘듬.

> **전역 스코프 노출은 왜 문제가 될까?**
> - 이름 충돌: 다른 스크립트에서 같은 이름을 쓰면 기존 값을 덮어쓸 수 있음.
> - 의도치 않은 수정: 어디서든 접근할 수 있어서, 실수로 값이 바뀌기 쉬움.
> - 의존성 불명확: 이 값이 어떤 흐름에서 생성되고 사용하는지 파악하기 쉬움.

이 문제를 해결하기 위해 모듈 시스템을 적용.

---

### JS 파일을 모듈로 변환하기

#### 1. emoji.js 모듈화하기

기존의 `emoji.js` 파일을 모듈로 변환. 전역 변수 대신 `export`를 사용해 내보냄.

```js
export const emojis = [
  { icon: '😊', name: 'Smiling Face' },
  { icon: '🚀', name: 'Rocket' },
  { icon: '🍕', name: 'Pizza' },
  { icon: '🐱', name: 'Cat' },
  { icon: '🌈', name: 'Rainbow' },
  { icon: '🎸', name: 'Guitar' }
];
```

이렇게 하면 `emojis` 배열은 더이상 전역 스코프에 노출되지 않고, 이 모듈을 가져오는 파일에서만 사용할 수 있음.