---
title: 플러그인으로 빌드 확장하기
source: https://frontend-fundamentals.com/bundling/webpack-tutorial/plugin.html
---
### plugin?

지금까지 필요한 파일을 변환할 때 '로더'를 사용함. 이에 반면 프로젝트 전체 빌드 흐름을 더 유연하게 제어할 땐 '플러그인'을 사용함.

ex)
- 빌드할 때마다 `index.html`을 새로 만들어야 할 때.
- CSS를 JS랑 분리해서 따로 관리해야 할 때.
- `dist`폴더에 쌓인 오래된 파일들을 지우고 싶을 때.
- `public` 폴더 안의 이미지나 폰트를 그대로 복사하고 싶을 때.

---
### HTML 자동 생성: HtmlWebpackPlugin

지금까지 만든 `index.html`에 빌드한 `<script src="./dist/bundle.js">`를 직접 넣어서 JS 번들을 불러옴.

이 방식도 괜찮으나, 나중에 프로젝트가 커지고 파일 이름이 바뀌거나 CSS가 추가되면 매번 HTML을 직접 고쳐야 할 수 있음.

이럴 때 유용한 게 `HtmlWebpackPlugin`임. HTML 파일을 템플릿으로 등록해놓으면, 웹팩이 알아서 필요한 JS와 CSS파일을 자동으로 삽입해줌.

```bash
npm install --save-dev html-webpack-plugin
```

`webpack.config.js` 플러그인 설정 추가.

```js
const HtmlWebpackPlugin = require("html-webpack-plugin");

module.exports = {
  // ...기존과 동일
  plugins: [
    new HtmlWebpackPlugin({
      template: "./index.html", // 템플릿 HTML
      filename: "index.html", // 출력될 HTML 파일 이름
      inject: true // <script> 태그 자동 삽입
    })
  ]
};
```

index.html에서 `<script>` 태그는 지워도 됌. 웹팩이 알아서 넣어줌.

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Emoji of the Day</title>
</head>
<body>
  <div id="root"></div>
  <!-- <script src="./dist/bundle.js"></script> -->
</body>
</html>
```

---
### 빌드

빌드하면, 기존과 다르게 dist 폴더에 `index.html`파일이 생김.

```
dist/
├── assets/
│   └── Inter-Regular.woff2
├── bundle.js
└── index.html
```

`/dist/index.html` 파일엔 `bundle.js` 스크립트가 추가된걸 확인할 수 있음. 

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Emoji of the Day</title>
  <script defer src="bundle.js"></script>
</head>
<body>
  <div id="root"></div>
</body>
</html>
```

>![](https://i.imgur.com/T1UfaDm.png)

