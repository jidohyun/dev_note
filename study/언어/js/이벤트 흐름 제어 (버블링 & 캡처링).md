
---

### HTML 이벤트의 흐름

HTML 문서의 각 엘리먼트들은 아래와 같이 태그 안의 태그가 위치하는 식으로 <font color="#4bacc6">계층적</font>으로 이루어짐을 볼 수 있다. 이러한 계층적 구조 특징 때문에 만일 HTML 요소에 이벤트가 발생할 경우 **연쇄적 이벤트 흐름**이 일어나게 된다.

예를들어 아래 3개가 중첩된 박스 영역에서 가장 자신 엘리먼트인 p 박스를 클릭하면 onclick 이벤트 스크립트가 p 뿐만 아니라 그의 부모인 div와 form 엘리먼트도 발생함을 볼 수 있다.

```html
<form onclick="alert('form')">FORM
    <div onclick="alert('div')">DIV
    	<p onclick="alert('p')">P</p>
    </div>
</form>
```

이러한 현상을 **이벤트 전파(Event Propagation)** 라 부르며, 전파 방향에 따라 버블링을 캡처링으로 구분한다.

- <font color="#92d050">버블링(Bubbling)</font> : 자식 요소에서 발생한 이벤트가 바깥 부모 요소로 전파 (기본값)
- <font color="#ff0000">캡쳐링(Capturing)</font> : 자식 요소에서 발생한 이벤트가 부모 요소부터 시작하여 안쪽 자식 요소까지 전달

![](https://i.imgur.com/GsPL0bn.png)

어떤 전파 방향을 사용할 것이냐는 자바스크립트 설정을 통해 제어할 수 있으며 둘을 동시에도 사용이 가능하다.

### 이벤트 전파 흐름

표준 DOM 이벤트에서 정의한 이벤트 흐름엔 다음 3가지가 있다. 

- 캡처링 단계 : 이벤트가 하위 요소로 전파되는 단계
- 타깃 단계 : 이벤트가 설치 타깃 요소에 전달되는 단계
- 버블링 단계 : 이벤트가 상위 요소로 전파되는 관계

아래 html문서의 테이블 안의 `<td>` 를 클릭하면 어떻게 이벤트가 흐르는지 아래 그림을 보고 이해할 수 있다.

![](https://i.imgur.com/RCqq7MG.png)

![](https://i.imgur.com/8vTJB6C.png)

1. `<td>`를 클릭하면 이벤트 최상위 조상에서 시작해 아래로 전파된다 (캡처링 단계)
2. 이벤트가 타깃 요소에 도착해 리스너를 실행한다 (타깃 단계)
3. 그리고 다시 상위로 이벤트를 전파한다

이처럼 브라우저는 사용자로부터 이벤트가 발생하면 가장 상단의 요소부터 하위의 요소까지 내려오고 다시 거슬러 올라가는 식으로 이벤트를 전달하여 발생하도록 한다. 만일 타깃 요소까지 이벤트를 전파하는 과정에서 그의 부모, 조상에도 이벤트 리스너가 등록되어 있다면 실행되게 된다.

