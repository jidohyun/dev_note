
---

### Context api?

Context api는 리액트의 내장 api이다 
앱에서 컴포넌트에게 props를 사용하지 않고 필요한 데이터를 전송할 수 있다.
따라서 앱의 모든 컴포넌트에서 사용할 수 있는 데이터를 전달할 때 유용하다.

Context api를 쓰면 편할 것 같지만 치명적인 단점이 있다.
바로 Context api를 쓰면 동작이 일어날 때마다 리렌더링이 된다.

그래서 지금은 거의 안쓰는 기술이다.
(다크모드는 씀)


### 상태관리 라이브러리?

우리는 react hook인 useState를 주로 사용하여 상태관리를 한다.
하지만 중요한 변수가 늘어날 수록 useState의 상태관리가 어려워지는데..

이렇게 많은 상태를 관리하기 편하게 해주는 라이브러리가 있는데..
그의 이름은 zustand이다.

### 사용법

```ts
import { create } from 'zustand'
export const use이름Store = create((set, get) => { 
	return { 
		상태: 초깃값,
		액션: 함수 
	} 
})
```

`set`과 `get` 매개변수는 다음과 같이 각 액션에서 사용할 수 있다.

`get`함수를 호출하면, 상태와 액션을 가진 스토어 **객체를 얻을 수 있다**.
또한 `set`을 호출하면, **상태를 변경할 수 있다.**

`set`함수를 호출할 때 콜백을 사용하면, `get`함수를 사용하지 않아도 바로 스토어 객체를 얻을 수 있다.
변경할 상태를 속성으로 포함한 객체를 콜백에서 반환해야 한다.

```tsx
import { create } from 'zustand' 
export const use이름Store = create((set, get) => {
	return {
		상태: 초깃값, 
		액션: () => { 
			const state = get() 
			const { 상태 } = state 
			set({ 상태: 상태 + 1 }) 
		}
	} 
})
```

`set` 함수를 호출할 때 콜백을 사용하면 `get` 함수를 사용하지 않아도 바로 스토어 객체를 얻을 수 있다
변경할 상태를 속성으로 포함한 객체를 콜백에서 반환해야 한다.

```tsx
import { create } from 'zustand'
export const use이름Store = create(set => {
	return {
		상태: 초깃값,
		액션: () => {
			set(state => ({ 상태: state.상태 + 1}))
		}
	}
})
```

컴포넌트에서 스토어 훅을 가져와 호출하면, 상태와 액션을 가진 객체를 얻을 수 있다.
또한 상태는 반응형이기 때문에, 상태가 변경되면 컴포넌트가 다시 렌더링된다.

```tsx
import { use이름Store } from '~/store/스토어'
export default function 컴포넌트() {
	const 상태 = use이름Store(state => state.상태)
	const 액션 = use이름Store(state => state.액션)
	return (
		<>
			<h2>상태</h2>
			<button onClick={액션}>+</button>
		</>
	)
}
```

콜백 없이 스토어 훅을 호출하면 액션이 아닌 스토어 객체를 얻을 수 있지만, 이는 사용하지 않는 상태가 변경되어도 컴포넌트가 다시 렌더링 되기 때문에 대부분은 권장하지 않는다.

```tsx
import { use이름Store } from '~/store/스토어'
export default function 컴포넌트() {
	const 스토어 = use이름Store()
	return (
		<>
			<h2>상태</h2>
			<button onClick={액션}>+</button>
		</>
	)
}
// 권장하지 않음
```

### 예제

프로젝트의 `store` 폴더에서 각 스토어를 생성한다.
타입스크립트를 사용할 때에는 `create` 함수의 제네릭으로 상태와 액션 타입을 전달한다.

```ts
create<타입>()
```

`get` 함수를 호출하면, 상태와 액션이 포함된 스토어 객체를 얻을 수 있다.
이를 통해, 각 액션에서 상태의 값을 얻을 수 있다.

```tsx
import { create } from 'zustand'

export const useCountStore = create<{
	count: number 
	increase: () => void 
	decrease: () => void 
}>((set, get) => ({ 
	count: 1, 
	increase: () => { 
		const { count } = get() 
		set({ count: count + 1 }) 
	}, 
	decrease: () => { 
		const { count } = get() 
		set({ count: count - 1 }) 
	} 
}))
```

`get` 함수를 사용하지 않고 `set`의 콜백을 사용하면 더 간결하게 상태를 변경할 수 있다.

```tsx
import { create } from 'zustand'

export const useCountState = create<{
	count: number
	increase: () => void
	decrease: () => void
}>
```